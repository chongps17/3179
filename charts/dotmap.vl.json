{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {"text": "Fire detections in Australia between 1 August 2019 to 30 September 2019",
  "anchor": "middle"},
  "vconcat": [
    {
      "width": 800,
      "height": 700,
      "projection": {
        "type": "albers",
        "parallels": [-18, -36],
        "rotate": [-132, 0]
      },
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/chongps17/3179/refs/heads/main/data/ne_10m_admin_1_states_provinces.json",
            "format": { "type": "topojson", "feature": "ne_10m_admin_1_states_provinces" }
          },
          "transform": [{ "filter": "datum.properties.adm0_a3 == 'AUS'" }],
          "mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/chongps17/3179/main/data/fire_archive_M6_96619.csv"
          },
          "transform": [
            { "filter": { "param": "dateBrush" } }   
          ],
          "mark": { "type": "circle", "opacity": 0.85, "stroke": "white", "strokeWidth": 0.4 },
          "encoding": {
            "longitude": { "field": "longitude", "type": "quantitative" },
            "latitude":  { "field": "latitude",  "type": "quantitative" },
            "color": { "field": "brightness", "type": "quantitative", "scale": { "scheme": "inferno" } },
            "size": { "field": "frp", "type": "quantitative", "scale": { "range": [10, 200] } },
            "tooltip": [
              {"field":"acq_date"}, {"field":"acq_time"},
              {"field":"brightness"}, {"field":"frp"},
              {"field":"latitude"}, {"field":"longitude"}
            ]
          }
        }
      ]
    },

    {
      "width": 800,
      "height": 100,
      "data": { "url": "https://raw.githubusercontent.com/chongps17/3179/main/data/fire_archive_M6_96619.csv" },
      "params": [
        {
          "name": "dateBrush",
          "select": { "type": "interval", "encodings": ["x"] }
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "acq_date",
          "type": "temporal",
          "title": "Range of dates recorded"
        },
        "y": { "aggregate": "count", "title": "Count of fires" },
        "tooltip": [
          {"field":"acq_date","type":"temporal","title":"Date"},
          {"aggregate":"count","title":"Detections"}
        ]
      }
    }
  ]
}
